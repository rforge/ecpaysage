
---
title: "Introduction au package `ECPaysage`"
author: | 
  | Jean-Pierre Rossi
  | INRA - CBGP, Centre de Biologie pour la Gestion des Populations, Montpellier http://www6.montpellier.inra.fr/cbgp/
date: "`r Sys.Date()`"
fontsize: 12pt
output:
   pdf_document:
     fig_caption: no
     fig_height: 5
     fig_width: 6
     number_sections: yes
     toc: yes
     toc_depth: 4
vignette: >
  %\VignetteIndexEntry{introduction_ecpaysage}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

#`ECPaysage`, versions de R et autres packages à installer

Le package `ECPaysage` doit être installé sur une version de *R >= 3.2.2*.

Il est également nécessaire d'avoir installé les packages suivants et leurs dépendances :

-`mvtnorm`

-`RandomFields`

-`splancs`

-`FeedbackTS`

-`ape`

-`sp`

-`rgdal`

-`SDMTools`

-`maptools`

-`ade4`

-`raster`

-`gstat`

-`geoR`

-`R2jags`

Pour `R2jags` il est également nécessaire d'installer **JAGS** (voir documentation du package `R2jags`)

`ECPaysage` n'est pas dépendant de ces packages au sens strict du terme mais ceux-ci seront utilisés au cours des TDs.

Par exemple sous `R` tapez :
```{r, eval=FALSE}
install.packages("nom du package", dependencies=TRUE)
```



#Comment lire les données contenues dans `ECPaysage`
`ECPaysage` contient des jeux de données qui seront utilisés durant les TD de l'école chercheur. Certains jeux de données sont accessibles avec la fonction `data` d'autres sont stockés dans le dossier `extdata` qui se trouve dans le répertoire d'installation de `R`.

Chargez le package :

```{r}
library(ECPaysage)
```


Par exemple tapez :

```{r}
data(xy104pt)
```

`xy104pt` est un objet de la classe `SpatialPoints` (package `sp`) 

```{r}
head(xy104pt)
```

Les données cartographiques ont été stockées dans leur format natif (geotiff, shapefile...) et peuvent être chargées avec les fonctions classiques de lecture de ces fichiers.

Les données sont contenues dans le dossier `extdata` qui se trouve sur votre disque dur dans le dossier d'installation de `R`. On y accède en suivant le chemin indiqué par la fonction `system.file`

Tapez le code suivant pour savoir où se trouve ce dossier :

```{r}
system.file("extdata", package="ECPaysage")
```

Ce que vous lisez ci-dessus est le chemin vers le dossier sur la machine qui compile ce manuel, vous lisez certainement autre chose pour votre propre machine.

Pour lire un fichier contenu dans le dossier `extdata` il faut connaître le chemin complet vers ce fichier. Par exemple, pour le fichier `r.tif` la fonction `system.file` indique :

```{r}
system.file("extdata/r.tif", package="ECPaysage")
```

On peut lire ce fichier pour comme on le ferait pour n'importe quel autre fichier geotiff :

```{r}
library(raster)
r <- raster(system.file("extdata/r.tif", package="ECPaysage")) 
```

`r` est un objet de la classe `RasterLayer` (package `raster`)

```{r}
r
```

```{r}
plot(r)
```

ECPaysage contient une série de fichiers (liste ci-dessous) dont le shapefile `contours` :

```{r}
library(maptools)
contours <- readShapeSpatial(system.file("extdata/contours.shp", package="ECPaysage"))
contours
```

`contours` est un objet de la class `SpatialPolygonsDataFrame` (package `sp`)
  
```{r}
plot(contours)
```

`RasterLayer` et `SpatialPolygonsDataFrame` peuvent être superposés avec la fonction `plot`
 de `raster`:
 
```{r}
plot(r, axes=F, addfun=plot(contours, add=TRUE), box=F) 
```

#Liste des jeux de données disponibles dans `ECPaysage`

## Fichiers rasters (.tif) dans le dossier `extdata/`

###r.tif
`r` est un raster de 528 par 841 pixel de résolution 50m. Le fichier décrit un paysage au nord de Montpellier (source IGN).

landuses:

1 : "Bati"
2 : "Broussailles"
3 : "Carriere decharge"
4 : "Eau libre"
5 : "Foret"
6 : "Prairie"
7 : "Rocher eboulis"
8 : "Sable gravier"
9 : "Vigne verger"
10 : "Zone d'activites"

             

###ods_coteaux_2km_1_l93.tif

`ods_coteaux_2km_1_l93.tif` est un raster utilisé pour illustrer le fonctionnement du logiciel fragstat.

landuses:


0 : background
3 : cereale
4 : colza
5 : mais
6 : prairies
7 : proteol
8 : tournesol

###l104pt_1.tif à l104pt_104.tif
Une série de 104 buffers circulaires de 600 m de rayon situés dans le raster r.

## Fichiers shape (.shp) dans le dossier `extdata/`

###BV_Bourdic RGF93.shp
###contours.shp
Ce shapefile délimite le paysage décrit dans r.tif (voir plus haut).

###fosses_Bourdic RGF93.shp
###parcellaire_1962.shp
###parcellaire_2009.shp

## Données disponibles en utilisant la fonction `data()`
Tapez `?nom du jeu de données` pour afficher la description.

###DONBIN

###DONPG

###xy104pt
